# files<-list.files("data", full.names = TRUE)
#data<-lapply(files, fromJSON) %>%
#  bind_rows()
test.file <- fromJSON(file = "5a08ea4ab921bc0001e1c10a.json")
#| label: merge all the json files
#| echo: false
# files<-list.files("data", full.names = TRUE)
#data<-lapply(files, fromJSON) %>%
#  bind_rows()
test.file <- fromJSON(file = "data/5a08ea4ab921bc0001e1c10a.json")
View(test.file)
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = TRUE)
data<-lapply(files, fromJSON) %>%
bind_rows()
#| label: merge all the json files
#| echo: false
files<-list.files("data", full.names = TRUE)
data<-lapply(files, fromJSON) %>%
bind_rows()
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = TRUE)
data<-lapply(files, fromJSON) %>%
bind_rows()
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = TRUE)
data<-lapply(files, fromJSON) %>%
bind_rows()
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = TRUE)
data<-lapply(files, fromJSON) %>%
bind_rows()
#| echo: false
#| label: Load R libraries
#| warning: false
#| message: false
library(readr)
library(dplyr)
library(ggplot2)
library(ez)
library(osfr)
library(rjson)
library(jsonlite)
#| label: grab the data files
#| echo: false
#| include: false
osf_retrieve_node("x38yn") %>%
osf_ls_files(n_max = "Inf") %>%
osf_download(path="data/", conflicts="skip")
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = T)
data<-lapply(files, fromJSON) %>%
bind_rows()
View(data)
#| label: grab the data files
#| echo: false
#| include: false
osf_retrieve_node("x38yn") %>%
osf_ls_files(n_max = "Inf") %>%
osf_download(path="data/", conflicts="skip")
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = T)
data<-lapply(files, fromJSON) %>%
bind_rows()
View(data)
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = T)
data<-lapply(files, fromJSON) %>%
bind_rows()
#| echo: false
#| label: Load R libraries
#| warning: false
#| message: false
library(readr)
library(dplyr)
library(ggplot2)
library(ez)
library(osfr)
library(rjson)
library(jsonlite)
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = T)
data<-lapply(files, fromJSON) %>%
bind_rows()
write.csv(data, "C:\\Users\\Yifan\\Desktop\csv", row.names=FALSE)
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = T)
data<-lapply(files, fromJSON) %>%
bind_rows()
write.csv(data, "C:\\Users\\Yifan\\Desktop\c.csv", row.names=FALSE)
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = T)
data<-lapply(files, fromJSON) %>%
bind_rows()
write.csv(data, "data.csv", row.names=FALSE)
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = T)
data<-lapply(files, fromJSON) %>%
bind_rows()
data<-data.frame(data)
write.csv(data, "data.csv", row.names=FALSE)
#| label: merge all the json files
#| echo: false
files<-list.files("data/", full.names = T)
data<-lapply(files, fromJSON) %>%
bind_rows()
df <-data.frame(data)
write.csv(df, "data.csv", row.names=FALSE)
#| label: Load R libraries
#| echo: false # hides code in rendered doc
#| message: false # hides messages in code
library(osfr)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(ez)
library(rjson)
library(jsonlite)
#| label: Load the data from OSF
#| include: false # hides data objects generated by code
#| echo: false
osf_retrieve_node("x38yn") %>%
osf_ls_files(n_max = "Inf") %>%
osf_download(path="data/", conflicts="skip")
#| label: Concatenate data files into one file
#| echo: false
files <- list.files(path = "data/", full.names = T)
data <- lapply(files, fromJSON) %>%
bind_rows()
#| label: Clean up data frame
#| echo: false
data.clean <- data %>%
select(-c("success", "timeout", "failed_images", "failed_audio", "failed_video", "trial_type", "trial_index", "time_elapsed", "internal_node_id", "study_id", "session_id", "stimulus")) %>%
filter(phase == "test",
task == "choose") %>%
pivot_longer(c("left_upvote", "right_upvote"),
names_to = "img_pos", values_to = "upvotes")
#| label: Upvote graph!
#| echo: false
data.clean <- data.clean %>%
mutate(revealed = ifelse(((response == "arrowleft" && img_pos == "left_upvote") | (response == "arrowright" && img_pos == "right_upvote")), TRUE, FALSE))
#| label: Load R libraries
#| echo: false # hides code in rendered doc
#| message: false # hides messages in code
library(osfr)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(ez)
library(rjson)
library(jsonlite)
#| label: Load the data from OSF
#| include: false # hides data objects generated by code
#| echo: false
osf_retrieve_node("x38yn") %>%
osf_ls_files(n_max = "Inf") %>%
osf_download(path="data/", conflicts="skip")
#| label: Load R libraries
#| echo: false # hides code in rendered doc
#| message: false # hides messages in code
library(osfr)
library(tidyverse)
library(dplyr)
library(ggplot2)
library(ez)
library(rjson)
library(jsonlite)
#| label: Load the data from OSF
#| include: false # hides data objects generated by code
#| echo: false
osf_retrieve_node("x38yn") %>%
osf_ls_files(n_max = "Inf") %>%
osf_download(path="data/", conflicts="skip")
#| label: Concatenate data files into one file
#| echo: false
files <- list.files(path = "data/", full.names = T)
data <- lapply(files, fromJSON) %>%
bind_rows()
#| label: Clean up data frame
#| echo: false
data.clean <- data %>%
select(-c("success", "timeout", "failed_images", "failed_audio", "failed_video", "trial_type", "trial_index", "time_elapsed", "internal_node_id", "study_id", "session_id", "stimulus")) %>%
filter(phase == "test",
task == "choose") %>%
pivot_longer(c("left_upvote", "right_upvote"),
names_to = "img_pos", values_to = "upvotes")
#| label: Clean up data frame
#| echo: false
data.clean <- data %>%
select(-c("success", "timeout", "failed_images", "failed_audio", "failed_video", "trial_type", "trial_index", "time_elapsed", "internal_node_id", "study_id", "session_id", "stimulus")) %>%
filter(phase == "test",
task == "choose")
#| label: filter data
#| echo: false
data.filtered <- data.clean %>%
group_by(subject) %>%
mutate(n_pass = count(check = TRUE))
#| label: filter data
#| echo: false
data.filtered <- data.clean %>%
group_by(subject_id) %>%
mutate(n_pass = count(check = TRUE))
#| label: filter data
#| echo: false
data.filtered <- data.clean %>%
group_by(subject_id) %>%
mutate(n_pass = sum(check == TRUE))
View(data.filtered)
#| label: filter data
#| echo: false
data.filtered <- data.clean %>%
group_by(subject_id) %>%
mutate(n_pass = sum(check == false))
#| label: filter data
#| echo: false
data.filtered <- data.clean %>%
group_by(subject_id) %>%
mutate(n_pass = sum(check == FALSE))
#| label: filter data
#| echo: false
data.filtered <- data.clean %>%
group_by(subject_id) %>%
mutate(n_pass = sum(check == FALSE)) %>%
filter(n_pass > 3)
#| label: filter data
#| echo: false
data.exclude <- data.clean %>%
group_by(subject_id) %>%
mutate(n_pass = sum(check == FALSE)) %>%
filter(n_pass > 3)
exclude.subject <- data.exclude %>%
pull(subject_id) %>%
unique() %>%
length()
#| label: filter data
#| echo: false
data.exclude <- data.clean %>%
group_by(subject_id) %>%
mutate(n_pass = sum(check == FALSE)) %>%
filter(n_pass > 3)
exclude.subjects <- data.exclude %>%
pull(subject_id) %>%
unique() %>%
length()
data.filtered <- data.clean %>%
filter(!subject_id %in% exclude.subjects)
#| label: Upvote graph!
#| echo: false
pivot_longer(c("left_upvote", "right_upvote"),
names_to = "img_pos", values_to = "upvotes")
#| label: filter failed participants
#| echo: false
data.exclude <- data.clean %>%
group_by(subject_id) %>%
mutate(n_pass = sum(check == FALSE)) %>%
filter(n_pass > 3)
exclude.subjects <- data.exclude %>%
pull(subject_id) %>%
unique() %>%
length()
data.filtered <- data.clean %>%
filter(!subject_id %in% exclude.subjects)
#| label: Upvote graph!
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(c("left_upvote", "right_upvote"),
names_to = "img_pos", values_to = "upvotes") %>%
mutate(revealed = ifelse(((response == "arrowleft" && img_pos == "left_upvote") | (response == "arrowright" && img_pos == "right_upvote")), TRUE, FALSE))
#| label: Upvote graph!
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(c("left_upvote", "right_upvote"),
names_to = "img_pos", values_to = "upvotes") %>%
mutate(revealed = ifelse(((response == "arrowleft" & img_pos == "left_upvote") | (response == "arrowright" & img_pos == "right_upvote")), TRUE, FALSE))
View(data.tidyup)
View(data.filtered)
#| label: Upvote graph!
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(c("left_upvote", "right_upvote", ) ,
names_to = "img_pos", values_to = "upvotes") %>%
separate(img_pos, c("pos", "upvote"), sep = "_") %>%
mutate(revealed = ifelse(((response == "arrowleft" & img_pos == "left_upvote") | (response == "arrowright" & img_pos == "right_upvote")), TRUE, FALSE))
#| label: Upvote graph!
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(c("left_upvote", "right_upvote", ) ,
names_to = "img_pos", values_to = "upvotes") %>%
separate(img_pos, c("pos", "upvote"), sep = "_")
#  mutate(revealed = ifelse(((response == "arrowleft" & img_pos == "left_upvote") | (response #== "arrowright" & img_pos == "right_upvote")), TRUE, FALSE))
#| label: Upvote graph!
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(c("left_upvote", "right_upvote", ) ,
names_to = "img_pos", values_to = "upvotes") %>%
separate(img_pos, c("pos", "upvote"), sep = "_") %>%
mutate(upvote = factor(upvote, levels = c("left", "right")),
img_id = paste(data.filtered$left_img, data.filtered$right_img, sep = "_"),
img_pos = ifelse(upvote == "left", "left", "right")) %>%
select(-pos, -upvote)
#| label: Upvote graph!
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(cols = starts_with("left_") | starts_with("right_"),
names_to = c("pos", ".value"), names_sep = "_") %>%
#  mutate(revealed = ifelse(((response == "arrowleft" & img_pos == "left_upvote") | (response #== "arrowright" & img_pos == "right_upvote")), TRUE, FALSE))
#| label: Upvote graph!
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(cols = starts_with("left_") | starts_with("right_"),
names_to = c("pos", ".value"), names_sep = "_")
#  mutate(revealed = ifelse(((response == "arrowleft" & img_pos == "left_upvote") | (response #== "arrowright" & img_pos == "right_upvote")), TRUE, FALSE))
View(data.filtered)
#| label: Upvote graph!
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(cols = starts_with("left_") | starts_with("right_"),
names_to = c("pos", ".value"), names_sep = "_") %>%
mutate(revealed = ifelse(((response == "arrowleft" & img_pos == "left_upvote") | (response #== "arrowright" & img_pos == "right_upvote")), TRUE, FALSE))
#| label: Upvote graph!
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(cols = starts_with("left_") | starts_with("right_"),
names_to = c("pos", ".value"), names_sep = "_") %>%
mutate(revealed = ifelse(((response == "arrowleft" & img_pos == "left_upvote") | (response == "arrowright" & img_pos == "right_upvote")), TRUE, FALSE))
#| label: Upvote graph!
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(cols = starts_with("left_") | starts_with("right_"),
names_to = c("pos", ".value"), names_sep = "_") %>%
mutate(revealed = ifelse(((response == "arrowleft" & pos == "left") | (response == "arrowright" & pos == "right")), TRUE, FALSE))
#| label: filter failed participants
#| echo: false
data.exclude <- data.clean %>%
group_by(subject_id) %>%
mutate(n_pass = sum(check == FALSE)) %>%
filter(n_pass > 3)
exclude.subjects <- data.exclude %>%
pull(subject_id) %>%
unique() %>%
length()
data.filtered <- data.clean %>%
filter(!subject_id %in% exclude.subjects) %>%
filter(check == TRUE)
#| label: tidy up the data
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(cols = starts_with("left_") | starts_with("right_"),
names_to = c("pos", ".value"), names_sep = "_") %>%
mutate(revealed = ifelse(((response == "arrowleft" & pos == "left") | (response == "arrowright" & pos == "right")), TRUE, FALSE)) %>%
select(subject_id, )
#| label: tidy up the data
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(cols = starts_with("left_") | starts_with("right_"),
names_to = c("pos", ".value"), names_sep = "_") %>%
mutate(revealed = ifelse(((response == "arrowleft" & pos == "left") | (response == "arrowright" & pos == "right")), TRUE, FALSE))
#| label: tidy up the data
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(cols = starts_with("left_") | starts_with("right_"),
names_to = c("pos", ".value"), names_sep = "_") %>%
mutate(revealed = ifelse(((response == "arrowleft" & pos == "left") | (response == "arrowright" & pos == "right")), TRUE, FALSE)) %>%
select(subject_id, pos, upvote, blur, img, revealed)
#| label: tidy up the data
#| echo: false
data.tidyup <- data.filtered %>%
pivot_longer(cols = starts_with("left_") | starts_with("right_"),
names_to = c("pos", ".value"), names_sep = "_") %>%
mutate(revealed = ifelse(((response == "arrowleft" & pos == "left") | (response == "arrowright" & pos == "right")), TRUE, FALSE)) %>%
select(subject_id, pos, upvote, blur, img, revealed) %>%
group_by(img)
#| upvote graph
#| echo: false
graph.prep <- data.tidyup %>%
group_by(upvote) %>%
summarize(percent = filter(revealed == TRUE)/count(revealed))
#| upvote graph
#| echo: false
graph.prep <- data.tidyup %>%
group_by(upvotes) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
#| upvote graph
#| echo: false
graph.prep <- data.tidyup %>%
group_by(upvote) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
#ggplot(data.tidyup, aes(x = upvote, y = )) +
View(graph.prep)
#| upvote graph
#| echo: false
graph.prep <- data.tidyup %>%
group_by(upvote) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
ggplot(data.tidyup, aes(x = upvote, y = percent))+
geon_line()
#| upvote graph
#| echo: false
graph.prep <- data.tidyup %>%
group_by(upvote) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
ggplot(data.tidyup, aes(x = upvote, y = percent))+
geom_line()
#| upvote graph
#| echo: false
graph.prep <- data.tidyup %>%
group_by(upvote) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
ggplot(graph.prep, aes(x = upvote, y = percent))+
geom_line()
#| upvote graph
#| echo: false
graph.prep <- data.tidyup %>%
group_by(upvote) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
ggplot(graph.prep, aes(x = upvote, y = percent))+
geom_line() +
stat_smooth(method = "loess", se = FALSE)
#| upvote graph
#| echo: false
graph.prep <- data.tidyup %>%
group_by(upvote) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
ggplot(graph.prep, aes(x = upvote, y = percent))+
geom_line() +
stat_smooth(method = "loess", se = FALSE) +
xlab("Upvote Count") +
ylab("# of reveals / # of appearance")
#| upvote graph
#| echo: false
graph.prep <- data.tidyup %>%
group_by(upvote) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
ggplot(graph.prep, aes(x = upvote, y = percent))+
geom_line() +
stat_smooth(method = "loess", se = TRUE) +
xlab("Upvote Count") +
ylab("# of reveals / # of appearance")
#| upvote graph
#| echo: false
graph.prep <- data.tidyup %>%
group_by(upvote) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
ggplot(graph.prep, aes(x = upvote, y = percent))+
geom_plot() +
stat_smooth(method = "loess", se = TRUE) +
xlab("Upvote Count") +
ylab("# of reveals / # of appearance")
#| upvote graph
#| echo: false
graph.prep <- data.tidyup %>%
group_by(upvote) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
ggplot(graph.prep, aes(x = upvote, y = percent))+
geom_point() +
stat_smooth(method = "loess", se = TRUE) +
xlab("Upvote Count") +
ylab("# of reveals / # of appearance")
#| upvote graph
#| echo: false
graph.prep2 <- data.tidyup %>%
group_by(blur) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
ggplot(graph.prep, aes(x = blur, y = percent))+
geom_point() +
stat_smooth(method = "loess", se = TRUE) +
xlab("Upvote Count") +
ylab("# of reveals / # of appearance")
#| upvote graph
#| echo: false
graph.prep2 <- data.tidyup %>%
group_by(blur) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
ggplot(graph.prep2, aes(x = blur, y = percent))+
geom_point() +
stat_smooth(method = "loess", se = TRUE) +
xlab("Upvote Count") +
ylab("# of reveals / # of appearance")
#| upvote graph
#| echo: false
graph.prep2 <- data.tidyup %>%
group_by(blur) %>%
summarize(percent = mean(revealed == TRUE)) %>%
ungroup()
ggplot(graph.prep2, aes(x = blur, y = percent))+
geom_point() +
stat_smooth(method = "loess", se = TRUE) +
xlab("Blurriness") +
ylab("# of reveals / # of appearance")
